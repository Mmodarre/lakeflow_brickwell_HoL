# Example: Using the SCD Type 2 template for Invoice table
# This replaces the explicit action definitions with a template reference
# Naming convention: <domain>_<final_table>_TMPL001

pipeline: billing_bronze
flowgroup: billing_invoice_TMPL001

# Use the SCD2 template
use_template: TMPL001_delta_scd2

# Template parameters
template_parameters:
  source_table: "brickwell_health.billing_ingestion_schema.invoice"
  target_table: "invoice"
  natural_keys:
    - invoice_number
  uuid_columns:
    - invoice_id
    - policy_id
  modified_at_column: "modified_at"
  created_at_column: "created_at"
  exclude_columns:
    - "__START_AT"
    - "__END_AT"
    - "created_at"
    - "modified_at"
    - "created_by"
    - "modified_by"
  sequence_timestamp_name: "_sequence_timestamp"
  target_schema: "edw_bronze_billing"